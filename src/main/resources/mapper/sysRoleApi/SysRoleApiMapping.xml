<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.cilicili.backend.mapper.SysRoleApiMapper">
    
    <resultMap type="site.cilicili.backend.domain.pojo.SysRoleApi" id="SysRoleApiMap">
        <result property="roleCode" column="role_code" jdbcType="VARCHAR"/>
        <result property="apiGroup" column="api_group" jdbcType="VARCHAR"/>
        <result property="apiMethod" column="api_method" jdbcType="VARCHAR"/>
        <result property="apiPath" column="api_path" jdbcType="VARCHAR"/>
    </resultMap>
    
    <!--查询单个-->
    <select id="queryById" resultMap="SysRoleApiMap">
        select role_code,
               api_group,
               api_method,
               api_path
        from sys_role_api
        where role_code = #{}
    </select>
    
    <!--查询指定行数据-->
    <select id="queryAll" resultMap="SysRoleApiMap">
        select
        role_code, api_group, api_method, api_path
        from sys_role_api
        <where>
            <if test="roleCode != null and roleCode != ''">
                and role_code = #{roleCode}
            </if>
            <if test="apiGroup != null and apiGroup != ''">
                and api_group = #{apiGroup}
            </if>
            <if test="apiMethod != null and apiMethod != ''">
                and api_method = #{apiMethod}
            </if>
            <if test="apiPath != null and apiPath != ''">
                and api_path = #{apiPath}
            </if>
        </where>
    </select>
    
    <!--统计总行数-->
    <select id="count" resultType="java.lang.Long">
        select count(*)
        from sys_role_api
        <where>
            <if test="roleCode != null and roleCode != ''">
                and role_code = #{roleCode}
            </if>
            <if test="apiGroup != null and apiGroup != ''">
                and api_group = #{apiGroup}
            </if>
            <if test="apiMethod != null and apiMethod != ''">
                and api_method = #{apiMethod}
            </if>
            <if test="apiPath != null and apiPath != ''">
                and api_path = #{apiPath}
            </if>
        </where>
    </select>
    
    <!--新增所有列-->
    <insert id="insert" keyProperty="" useGeneratedKeys="true">
        insert into sys_role_api(role_code, api_group, api_method, api_path)
        values (#{roleCode}, #{apiGroup}, #{apiMethod}, #{apiPath})
    </insert>
    
    <insert id="insertBatch" keyProperty="" useGeneratedKeys="true">
        insert into sys_role_api(role_code, api_group, api_method, api_path)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.roleCode}, #{entity.apiGroup}, #{entity.apiMethod}, #{entity.apiPath})
        </foreach>
    </insert>
    
    <insert id="insertOrUpdateBatch" keyProperty="" useGeneratedKeys="true">
        insert into sys_role_api(role_code, api_group, api_method, api_path)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.roleCode}, #{entity.apiGroup}, #{entity.apiMethod}, #{entity.apiPath})
        </foreach>
        on duplicate key update
        role_code = values(role_code),
        api_group = values(api_group),
        api_method = values(api_method),
        api_path = values(api_path)
    </insert>
    
    <!--通过主键修改数据-->
    <update id="update">
        update sys_role_api
        <set>
            <if test="roleCode != null and roleCode != ''">
                role_code = #{roleCode},
            </if>
            <if test="apiGroup != null and apiGroup != ''">
                api_group = #{apiGroup},
            </if>
            <if test="apiMethod != null and apiMethod != ''">
                api_method = #{apiMethod},
            </if>
            <if test="apiPath != null and apiPath != ''">
                api_path = #{apiPath},
            </if>
        </set>
        where roleCode= #{}
    </update>
    
    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from sys_role_api
        where roleCode = #{}
    </delete>


</mapper>


